<mat-card class="card-gradient-header card-hover mt-4">
  <mat-card-header class="flex justify-content-center">
    <div>
      <mat-card-title class="flex justify-content-center font-medium text-2xl">Información Personal y Financiera</mat-card-title>
      <mat-card-subtitle class="flex justify-content-center">Complete los siguientes campos requeridos</mat-card-subtitle>
    </div>
  </mat-card-header>

  <mat-card-content>
    <form class="formulario-captura">

      <!-- Información Personal -->
      <div class="seccion-formulario">
        <h4 class="titulo-seccion">
          <mat-icon>person</mat-icon>
          Información Personal
          <small *ngIf="cargandoCiudades" style="margin-left: 10px; color: #666;">
            (Cargando ciudades...)
          </small>
        </h4>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Tipo de identificación</mat-label>
            <mat-select name="tipoIdentificacion" required>
              <mat-option value="CC">Cédula de Ciudadanía</mat-option>
              <mat-option value="CE">Cédula de Extranjería</mat-option>
              <mat-option value="PA">Pasaporte</mat-option>
              <mat-option value="TI">Tarjeta de Identidad</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Identificación</mat-label>
            <input matInput name="identificacion" required placeholder="Número de identificación">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Sexo</mat-label>
            <mat-select name="sexo" required>
              <mat-option value="M">Masculino</mat-option>
              <mat-option value="F">Femenino</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Primer nombre</mat-label>
            <input matInput name="primerNombre" required placeholder="Primer nombre">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Segundo nombre</mat-label>
            <input matInput name="segundoNombre" required placeholder="Segundo nombre">
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Primer apellido</mat-label>
            <input matInput name="primerApellido" required placeholder="Primer apellido">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Segundo apellido</mat-label>
            <input matInput name="segundoApellido" required placeholder="Segundo apellido">
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Fecha de expedición</mat-label>
            <input matInput type="date" name="fechaExpedicion" required placeholder="MM/DD/YYYY">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Ciudad expedición documento</mat-label>
            <input matInput
                   [formControl]="ciudadExpedicionControl"
                   [matAutocomplete]="autoExpedicion"
                   placeholder="Buscar ciudad...">
            <mat-autocomplete #autoExpedicion="matAutocomplete"
                              [displayWith]="displayCiudad"
                              (optionSelected)="onCiudadSeleccionada($event.option.value, 'expedicion')">
              <mat-option *ngFor="let ciudad of ciudadesExpedicion | async" [value]="ciudad">
                {{ ciudad.ciudad }} - {{ ciudad.departamento }}
              </mat-option>
            </mat-autocomplete>
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Estado civil</mat-label>
            <mat-select name="estadoCivil" required>
              <mat-option value="S">Soltero(a)</mat-option>
              <mat-option value="C">Casado(a)</mat-option>
              <mat-option value="U">Unión libre</mat-option>
              <mat-option value="D">Divorciado(a)</mat-option>
              <mat-option value="V">Viudo(a)</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Fecha de nacimiento</mat-label>
            <input matInput type="date" name="fechaNacimiento" required placeholder="MM/DD/YYYY">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Ciudad de nacimiento</mat-label>
            <input matInput
                   [formControl]="ciudadNacimientoControl"
                   [matAutocomplete]="autoNacimiento"
                   placeholder="Buscar ciudad...">
            <mat-autocomplete #autoNacimiento="matAutocomplete"
                              [displayWith]="displayCiudad"
                              (optionSelected)="onCiudadSeleccionada($event.option.value, 'nacimiento')">
              <mat-option *ngFor="let ciudad of ciudadesNacimiento | async" [value]="ciudad">
                {{ ciudad.ciudad }} - {{ ciudad.departamento }}
              </mat-option>
            </mat-autocomplete>
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Dirección de residencia</mat-label>
            <input matInput name="direccionResidencia" required placeholder="Dirección completa de residencia">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Ciudad de residencia</mat-label>
            <input matInput
                   [formControl]="ciudadResidenciaControl"
                   [matAutocomplete]="autoResidencia"
                   required
                   placeholder="Buscar ciudad...">
            <mat-autocomplete #autoResidencia="matAutocomplete"
                              [displayWith]="displayCiudad"
                              (optionSelected)="onCiudadSeleccionada($event.option.value, 'residencia')">
              <mat-option *ngFor="let ciudad of ciudadesResidencia | async" [value]="ciudad">
                {{ ciudad.ciudad }} - {{ ciudad.departamento }}
              </mat-option>
            </mat-autocomplete>
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Teléfono residencia</mat-label>
            <input matInput type="tel" name="telefonoResidencia" required placeholder="Teléfono de residencia">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Móvil</mat-label>
            <input matInput type="tel" name="movil" required placeholder="Teléfono móvil">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Email</mat-label>
            <input matInput type="email" name="email" required placeholder="correo@ejemplo.com">
          </mat-form-field>
        </div>
      </div>

      <!-- Información Laboral -->
      <div class="seccion-formulario">
        <h4 class="titulo-seccion">
          <mat-icon>work</mat-icon>
          Información Laboral
        </h4>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Sitio de trabajo</mat-label>
            <input matInput name="sitioTrabajo" required placeholder="Nombre de la empresa o sitio de trabajo">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Cargo</mat-label>
            <input matInput name="cargo" required placeholder="Cargo que desempeña">
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Dirección de trabajo</mat-label>
            <input matInput name="direccionTrabajo" required placeholder="Dirección completa del trabajo">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Ciudad de trabajo</mat-label>
            <input matInput
                   [formControl]="ciudadTrabajoControl"
                   [matAutocomplete]="autoTrabajo"
                   required
                   placeholder="Buscar ciudad...">
            <mat-autocomplete #autoTrabajo="matAutocomplete"
                              [displayWith]="displayCiudad"
                              (optionSelected)="onCiudadSeleccionada($event.option.value, 'trabajo')">
              <mat-option *ngFor="let ciudad of ciudadesTrabajo | async" [value]="ciudad">
                {{ ciudad.ciudad }} - {{ ciudad.departamento }}
              </mat-option>
            </mat-autocomplete>
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Teléfono trabajo</mat-label>
            <input matInput type="tel" name="telefonoTrabajo" required placeholder="Teléfono del trabajo">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Tipo de contrato</mat-label>
            <mat-select name="tipoContrato" required>
              <mat-option value="INDEFINIDO">Indefinido</mat-option>
              <mat-option value="DEFINIDO">Definido</mat-option>
              <mat-option value="PRESTACION">Prestación de servicios</mat-option>
              <mat-option value="INDEPENDIENTE">Independiente</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-tercio">
            <mat-label>Salario</mat-label>
            <span matTextPrefix>$ </span>
            <input matInput
                   type="text"
                   name="salario"
                   required
                   placeholder="0.00"
                   (input)="formatCurrency($event, 'salario')"
                   (blur)="formatCurrencyOnBlur($event, 'salario')"
                   pattern="[0-9,.]+"
                   title="Ingrese solo números">
            <span matTextSuffix> COP</span>
          </mat-form-field>
        </div>
      </div>

      <!-- Información Adicional -->
      <div class="seccion-formulario">
        <h4 class="titulo-seccion">
          <mat-icon>business</mat-icon>
          Información Adicional Requerida
        </h4>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-completo">
            <mat-label>Código oficina</mat-label>
            <input matInput name="codOficina" required placeholder="Código de oficina">
          </mat-form-field>
        </div>
      </div>

      <!-- Campos Opcionales -->
      <div class="seccion-formulario">
        <h4 class="titulo-seccion">
          <mat-icon>monetization_on</mat-icon>
          Información Financiera (Opcional)
        </h4>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Valor aporte</mat-label>
            <span matTextPrefix>$ </span>
            <input matInput
                   type="text"
                   name="valorAporte"
                   placeholder="0.00"
                   (input)="formatCurrency($event, 'valorAporte')"
                   (blur)="formatCurrencyOnBlur($event, 'valorAporte')"
                   pattern="[0-9,.]+"
                   title="Ingrese solo números">
            <span matTextSuffix> COP</span>
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Periodicidad</mat-label>
            <mat-select name="periodicidad">
              <mat-option value="MENSUAL">Mensual</mat-option>
              <mat-option value="QUINCENAL">Quincenal</mat-option>
              <mat-option value="SEMANAL">Semanal</mat-option>
              <mat-option value="ANUAL">Anual</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="campos-row">
          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Fecha próximo pago</mat-label>
            <input matInput type="date" name="fechaProximoPago" placeholder="MM/DD/YYYY">
          </mat-form-field>

          <mat-form-field appearance="outline" class="campo-medio">
            <mat-label>Forma de pago</mat-label>
            <mat-select name="formaPago">
              <mat-option value="EFECTIVO">Efectivo</mat-option>
              <mat-option value="TRANSFERENCIA">Transferencia</mat-option>
              <mat-option value="CHEQUE">Cheque</mat-option>
              <mat-option value="DEBITO_AUTOMATICO">Débito automático</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

    </form>

  </mat-card-content>

  <mat-card-actions class="otp-actions">
    <button mat-raised-button color="primary" (click)="onContinuar()">
      <mat-icon>save</mat-icon>
      Guardar información
    </button>
  </mat-card-actions>
</mat-card>
