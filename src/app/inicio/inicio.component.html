<mat-toolbar color="primary" class="justify-content-center" *ngIf="cliente">
  <span>{{ cliente }}</span>
</mat-toolbar>

<!-- Proceso de crédito cuando YA hay cliente -->
<div class="container" *ngIf="cliente">

  <!-- Indicador de progreso móvil -->
  <div class="mobile-progress-indicator">
    <span>Paso {{currentStepIndex + 1}} de 5</span>
    <div class="progress-bar-custom">
      <div class="progress-fill-custom" [style.width.%]="((currentStepIndex + 1) / 5) * 100"></div>
    </div>
  </div>

  <!-- Stepper responsivo -->
  <mat-stepper [linear]="true" #stepper [selectedIndex]="currentStepIndex" [disableRipple]="true"
    style="background-color: var(--background);" class="responsive-stepper no-step-click">

    <mat-step [editable]="false">
      <ng-template matStepLabel>Validación Identidad</ng-template>
      <!-- COMPONENTE REAL: Solo se carga cuando currentStepIndex === 0 -->
      <app-validacion-identidad *ngIf="currentStepIndex === 0" [esActualizacion]="esActualizacion"
        (continuar)="onValidacionIdentidadContinuar()">
      </app-validacion-identidad>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>Validación canales</ng-template>
      <!-- COMPONENTE REAL: Solo se carga cuando currentStepIndex === 1 -->
      <app-validacion-otp *ngIf="currentStepIndex === 1" (continuar)="onValidacionOtpContinuar()"
        (error)="onValidacionOtpError($event)">
      </app-validacion-otp>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>Cuestionario</ng-template>
      <!-- COMPONENTE REAL: Solo se carga cuando currentStepIndex === 2 -->
      <app-preguntas *ngIf="currentStepIndex === 2" (continuar)="onPreguntasContinuar($event)">
      </app-preguntas>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>{{tituloProceso()}}</ng-template>
      <!-- COMPONENTE REAL: Solo se carga cuando currentStepIndex === 3 -->
      <app-captura-informacion *ngIf="currentStepIndex === 3" [tituloProceso]="tituloProceso()"
        (continuar)="onCapturaInformacionContinuar($event)">
      </app-captura-informacion>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>Firma</ng-template>
      <!-- COMPONENTE REAL: Solo se carga cuando currentStepIndex === 4 -->
      <app-firma *ngIf="currentStepIndex === 4" [datosCliente]="entidad"
        (procesarFinalizado)="onFirmaProcesoFinalizado($event)">
      </app-firma>
    </mat-step>

  </mat-stepper>

</div>
